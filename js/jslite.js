if(!Array.prototype.contains){Array.prototype.contains=function(a){if(this.indexOf(a)>-1){return true}return false}}if(!Array.prototype.every){Array.prototype.every=function(b){if(typeof b!=="function"){throw new TypeError()}var a=this.length>>>0,d=arguments[1],c;for(c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(g){if(this===void 0||this===null){throw new TypeError()}var e=Object(this);var a=e.length>>>0;if(typeof g!=="function"){throw new TypeError()}var d=[];var c=arguments[1];for(var b=0;b<a;b++){if(b in e){var f=e[b];if(g.call(c,f,b,e)){d.push(f)}}}return d}}if(!Array.prototype.forEach){Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b<a;b++){if(b in this){d.apply(c||this,[this[b],b,this])}}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d,b){var c=0,a;if(arguments[1]){if(arguments[1]>=this.length){return -1}else{if(arguments[1]<0){c=this.length+arguments[1]}else{c=arguments[1]}}}for(a=this.length;c<a;c++){if(this[c]===d){return c}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(d,a){var c=this.length,b;if(arguments[1]){if(arguments[1]<0){c=this.length+arguments[1]}else{if(arguments[1]>=c){c=this.length}else{c=arguments[1]}}}for(b=c-1;0<=b;b--){if(this[b]===d){return b}}return -1}}if(!Array.prototype.map){Array.prototype.map=function(b){if(this===void 0||this===null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!=="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in f){e[c]=b.call(d,f[c],c,f)}}return e}}if(!Array.prototype.remove){Array.prototype.remove=function(b){var a=this.indexOf(b);if(a>-1){return this.splice(a,1)[0]}}}if(!Array.prototype.unique){Array.prototype.unique=function(){var a=[];this.forEach(function(b){if(!a.contains(b)){a.push(b)}});return a}}Date.prototype.getAgeInYears=function(e){var d,b,c,f,a;if(this.toString()!=="Invalid Date"){d=this}else{d=new Date();e=typeof e==="string"?new Date(e):e}c=parseInt(d.getFullYear(),10)-parseInt(e.getFullYear(),10);f=parseInt(d.getMonth(),10)-parseInt(e.getMonth(),10);a=parseInt(d.getDate(),10)-parseInt(e.getDate(),10);b=c;if(f<0||(f===0&&a<0)){b=c-1}return b>=0?b:null};Function.prototype.assert=function(){var b=this,a=Array.prototype.slice.call(arguments);return function(){if(b.length!==arguments.length){throw new Error("function arguments do not equal number of expected arguments")}for(var d=0,c=arguments.length;d<c;d++){if(arguments[d].constructor!==a[d]){throw new Error("Wrong data type for function argument "+(++d)+".")}}return b.apply(this,arguments)}};Function.prototype.bind=function(a){var b=this;return function(){b.apply(a,arguments)}};Function.prototype.defaults=function(){var b=this,a;if(b.length<arguments.length){throw new Error("too many default arguments")}a=Array.prototype.slice.apply(arguments).concat(new Array(b.length-arguments.length));return function(){return b.apply(arguments,Array.prototype.slice.apply(arguments).concat(a.slice(arguments.length,a.length)))}};Function.prototype.method=function(a,b){this.prototype[a]=b;return this}.assert(String,Function);Function.prototype.overload=function(d,c){var a=d[c],b=this;if(!d.args){d.args={}}d.args[this.length]=true;d[c]=function(){if(d.args[arguments.length]){if(b.length===arguments.length){return b.apply(this,arguments)}else{if(typeof a==="function"){return a.apply(this,arguments)}}}else{throw new Error("does not match method signature")}}};Number.prototype.toHex=function(){return"0x"+this.toString(16)}.assert(Number);String.prototype.invoke=function(a){if(JSLITE.util[a]){return JSLITE.util[a](this+"")}}.assert(String);var JSLITE;if(!JSLITE){JSLITE={}}JSLITE.apply=function(b,c){for(var a in c){if(c.hasOwnProperty(a)){b[a]=c[a]}}return b};JSLITE.apply(JSLITE,{applyIf:function(b,c){for(var a in c){if(c.hasOwnProperty(a)){if(!b[a]){b[a]=c[a]}}}return b},copy:function(){var a={};this.makeArray(arguments).forEach(function(b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}});return a},counter:(function(){var a=0;return function(){return a++}}()),deepCopy:function(b){var d,c,a;if(b instanceof Array){d=[];for(c=0,a=b.length;c<a;c++){v=b[c];if(v instanceof Object){d.push(arguments.callee(v))}else{d.push(v)}}}else{d={};for(var e in b){if(b.hasOwnProperty(e)){v=b[e];if(v instanceof Object){d[e]=arguments.callee(v)}else{d[e]=v}}}}return d},extend:function(c,a,d){if(a.constructor===Object){d=a;a=c;c=d.constructor!==Object?d.constructor:function(){a.apply(this,arguments)}}var b=function(){};b.prototype=a.prototype;c.prototype=new b();c.superclass=a.prototype;c.prototype.constructor=c;JSLITE.apply(c.prototype,d);c.override=function(e){JSLITE.apply(c,e)};return c},flush:function(d){if(!d){return}var b=d.constructor===Array?d:JSLITE.makeArray(arguments),c,a;for(c=0,a=b.length;c<a;c++){switch(b[c]){case"cache":JSLITE.cache={};break;case"disabled":if(!JSLITE.isEmpty(JSLITE.disabled)){JSLITE.disabled={}}break;case"flyweight":flyweight={};break;case"garbage":JSLITE.garbage={}}}},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isEmpty:function(a){var b=true,c;if(typeof a==="string"&&a.length>0||typeof a==="number"&&!isNaN(a)||a instanceof Array&&a.length>0||a instanceof Date){b=false}else{if(a instanceof Object){for(c in a){if(a.hasOwnProperty(c)){b=false;break}}}}return b},makeArray:function(c){if(!JSLITE.isIE){return Array.prototype.slice.apply(c)}var b=c.length||0,a=new Array(b);if(c&&c.length){while(b--){a[b]=c[b]}}return a},proto:function(a){var b=function(){};b.prototype=a;return new b()}.assert(Object),ready:function(a){if(!JSLITE.isIE){document.addEventListener("DOMContentLoaded",a,false)}else{window.attachEvent("onload",a)}},toArray:function(b){var a=[],c;for(c in b){if(b.hasOwnProperty(c)){a.push(b[c])}}return a}.assert(Object),trim:function(b){var a=/^\s+|\s+$/g;return b.replace(a,"")}.assert(String)});JSLITE.globalSymbol="JSLITE";JSLITE.tabClasses={tabs:JSLITE.globalSymbol+"_Tabs",tab:JSLITE.globalSymbol+"_Tab"};JSLITE.tags=/^(?:\*|a|abbr|acronym|address|applet|area|b|base|basefont|bdo|big|blockquote|body|br|button|caption|center|cite|code|col|colgroup|dd|del|dfn|dir|div|dl|dt|em|fieldset|font|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|hr|html|i|iframe|img|input|ins|isindex|kbd|label|legend|li|link|map|menu|meta|noframes|noscript|object|ol|optgroup|option|p|param|pre|q|s|samp|script|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|title|tr|tt|u|ul|var)$/i;JSLITE.tooltipClass=JSLITE.globalSymbol+"_Tooltip";(function(){var a=navigator.userAgent.toLocaleLowerCase(),h=document.compatMode==="CSS1Compat",b=a.indexOf("opera")>-1,j=(/webkit|khtml/).test(a),i=j&&a.indexOf("webkit/5")!==-1,d=a.indexOf("iphone")>-1,c=!b&&a.indexOf("msie")>-1,g=!b&&a.indexOf("msie 6")>-1,f=!b&&a.indexOf("msie 7")>-1,e=!b&&a.indexOf("msie 8")>-1;JSLITE.apply(JSLITE,{isStrict:h,isOpera:b,isSafari:j,isSafari3:i,isiPhone:d,isIE:c,isIE6:g,isIE7:f,isIE8:e})}());(function(){JSLITE.apply(JSLITE,{cache:{},disabled:{},events:{},garbage:{}})}());JSLITE.Element=function(a){if(!a){this.dom=null;return}this.dom=typeof a==="string"?$(a):a;if(!this.dom.id){this.dom.id=JSLITE.dom.id()}};JSLITE.Element.prototype={constructor:JSLITE.Element,addClass:function(a){if(!this.hasClass(a)){this.dom.className+=" "+a}return this},after:function(c){var d=this.dom,a=JSLITE.Element.get(c,true),b=d.parentNode;if(b.lastChild===d){b.appendChild(a)}else{b.insertBefore(a,d.nextSibling)}return this},ajax:function(a){return JSLITE.ajax.get(a)},animate:function(a){a.elem=a.elem||this.dom;new JSLITE.ux.Animation(a).run();return this},append:function(b){if(JSLITE.isArray(b)){var a=document.createDocumentFragment();b.forEach(function(c){a.appendChild(JSLITE.Element.get(c,true))});this.dom.appendChild(a)}else{this.dom.appendChild(JSLITE.Element.get(b,true))}return this},before:function(a){var b=this.dom;b.parentNode.insertBefore(JSLITE.Element.get(a,true),b);return this},closest:function(a,b){var c=this.dom.parentNode;while(c&&c.nodeName){if(c.nodeName.toLocaleLowerCase()===a){return JSLITE.Element.get(c)}else{c=c.parentNode;if(c===document){return false}}}},disable:function(a){var b=this.dom,d,c;if(b.onclick){b.originalHandler=b.onclick}b.onclick=function(){return false};if(JSLITE.events[b.id]){d=JSLITE.events[b.id];for(c in d){if(d.hasOwnProperty(c)){JSLITE.dom.event.remove(b,c,d[c])}}}if(b.nodeName.toLocaleLowerCase()==="input"){b.disabled=true}else{this.addClass("disabled")}if(a){JSLITE.disabled[b.id]=b}return this},enable:function(){var a=this.dom,c,b;if(a.originalHandler){a.onclick=this.dom.originalHandler;a.originalHandler=null}else{a.onclick=null}if(JSLITE.events[a.id]){c=JSLITE.events[a.id];for(b in c){if(c.hasOwnProperty(b)){JSLITE.dom.event.add(a,b,c[b])}}}if(a.nodeName.toLocaleLowerCase()==="input"){a.disabled=false}else{this.removeClass("disabled")}if(JSLITE.disabled[a.id]){delete JSLITE.disabled[a.id]}return this},getStyle:function(b){if(this.dom.style[b]){return this.dom.style[b]}else{if(document.defaultView&&document.defaultView.getComputedStyle){b=b.replace(/([A-Z])/g,"-$1");b=b.toLocaleLowerCase();var a=document.defaultView.getComputedStyle(this.dom,"");return a&&a.getPropertyValue(b)}else{if(this.dom.currentStyle){return this.dom.currentStyle[b]}else{return null}}}},hasClass:function(a){return a&&(" "+this.dom.className+" ").indexOf(" "+a+" ")>-1},hide:function(){this.dom.style.display="none";return this},list:function(f,b){if(["SELECT","UL","OL"].join().indexOf(this.dom.nodeName)===-1){throw new Error("Method only acts on lists.")}var e=this.dom,c,g,a,d=function(j,i,h){if(e.nodeName==="SELECT"){e.options[e.options.length]=new Option(h[i],this[i],false,false)}else{JSLITE.Element.create({tag:"li",attr:{innerHTML:h[i]},parent:e})}};if(f[0].constructor===Object){g=e.nodeName==="SELECT"?"option":"li";f.forEach(function(h){c={};for(a in h){if(h.hasOwnProperty(a)){c[a]=h[a]}}JSLITE.Element.create({tag:g,attr:c,parent:e})})}else{f.forEach(d,b||f)}return this},next:function(a,c){if(a&&typeof a==="boolean"){c=a;a=undefined}var b=JSLITE.Element.get(this,true).nextSibling;return b.nodeType===1?c?b:JSLITE.Element.fly(b):arguments.callee.call(b,a,c)},on:function(b,a){if(typeof b==="string"){b=[b]}b.forEach(function(e){JSLITE.dom.event.add(this.dom,e,a);var d=null,c=[];if(!JSLITE.events[this.dom.id]){JSLITE.events[this.dom.id]={}}d=JSLITE.events[this.dom.id];if(!d[e]){d[e]=a}else{if(!JSLITE.isArray(d[e])){c=JSLITE.toArray(d);c.push(a);d[e]=c}else{d[e].push(a)}}}.bind(this))},parent:function(b,d){var a=function(){return d?c:JSLITE.Element.get(c)},c=JSLITE.Element.get(this,true).parentNode;if(!c){throw new Error("Parent could not be found")}if(b&&typeof b==="boolean"){d=b;b=undefined}if(c.nodeType===1){if(b&&typeof b!=="boolean"){if(c.nodeName.toLocaleLowerCase()!==b){return arguments.callee.call(c,b,d)}else{return a()}}else{return a()}}else{arguments.callee.call(c,b,d)}},previous:function(a,c){if(a&&typeof a==="boolean"){c=a;a=undefined}var b=JSLITE.Element.get(this,true).previousSibling;if(!b){throw new Error("Previous sibling could not be found")}return b.nodeType===1?c?b:JSLITE.Element.fly(b):arguments.callee.call(b,a,c)},remove:function(c){var b,a,d;if(typeof c==="boolean"&&c){b=this.dom.childNodes;for(a=0;b[a];){b[a].parentNode.removeChild(b[a])}}else{;d=JSLITE.Element.get(c||this,true);d.parentNode.removeChild(d)}return this},replaceClass:function(a,b){if(this.hasClass(b)){this.dom.className=this.dom.className.replace(b,a)}else{this.addClass(a)}return this},removeClass:function(b){var c=0,a;b=b instanceof Array?b:[b];for(a=b.length;c<a;c++){if(this.hasClass(b[c])){this.dom.className=this.dom.className.replace(b[c],"")}}return this},serialize:function(){var a=[];JSLITE.dom.formElements(this).forEach(function(e){outerLoop:switch(e.nodeName.toLocaleLowerCase()){case"input":switch(e.type){case"checkbox":case"radio":if(!e.checked){break outerLoop}}case"select":if(e.type==="select-multiple"){for(var c=0,d=e.options,b=d.length;c<b;c++){if(d[c].selected){a.push(encodeURIComponent(e.name)+"="+encodeURIComponent(d[c].value))}}break}default:a.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}});return a.join("&")},setStyle:function(a,c){if(typeof a==="string"){this.dom.style[a]=c}else{if(a.constructor===Object){for(var b in a){if(a.hasOwnProperty(b)){this.dom.style[b]=a[b]}}}}return this},show:function(){this.dom.style.display="block";return this},textContent:function(){return document.addEventListener?this.dom.textContent:this.dom.innerText},toggleClass:function(a){if(this.hasClass(a)){this.removeClass(a)}else{this.addClass(a)}return this},tooltip:function(a,c){var b=this.dom;if(JSLITE.isArray(a)){if(a.length>1){a=a.join("").replace(/\{([a-z]+)\}/gi,function(e,d){return b.getAttribute(d)})}else{a=b.getAttribute(a[0])}}JSLITE.ux.Tooltip.init.call(this,a,c);return this},trim:function(){var a=JSLITE.Element.get(this,true);if(!JSLITE.dom.isTextBox(a)){return}a.value=JSLITE.trim(a.value);return this},un:function(b,a){if(typeof b==="string"){b=[b]}b.forEach(function(c){JSLITE.dom.event.remove(this.dom,c,a);delete JSLITE.events[this.dom.id][c]}.bind(this))},validate:function(e){var c=this,a=typeof e==="object"?e:arguments[1],b=typeof e==="function"?e:null,d;if(this.dom.nodeName.toLocaleLowerCase()!=="form"){throw new Error("This method can only be invoked on a form object.")}this.dom.scrubber=new JSLITE.ux.Scrubber(this,a);if(JSLITE.events[this.dom.id]&&JSLITE.events[this.dom.id].submit){d=this.dom.scrubber;d.validate.call(d);return d.getErrors.call(d)}else{this.on("submit",function(f){this.scrubber.validate();if(b){b.call(c,f)}else{if(this.scrubber.getErrors()){f.preventDefault()}}})}return this},value:function(a){if(a){!JSLITE.dom.isTextBox(this)?this.dom.innerHTML=a:this.dom.value=a;return this}else{return this.textContent()||this.dom.value}}};JSLITE.apply(JSLITE.Element,{create:function(f,h){var d=new JSLITE.Element(document.createElement(f.tag)),g,b,a,c;if(f.attr){g=f.attr;for(b in g){if(g.hasOwnProperty(b)){if(b.indexOf("on")===0){d.dom[b]=typeof g[b]==="function"?g[b]:new Function(g[b])}else{d.dom[b]=g[b]}}}}if(f.style){g=f.style;for(b in g){if(g.hasOwnProperty(b)){if(b==="float"){d.dom.style[!JSLITE.isIE?"cssFloat":"styleFloat"]=g[b];continue}d.dom.style[b]=g[b]}}}if(f.children){g=f.children;for(b=0,a=g.length;b<a;b++){d.dom.appendChild(g[b].dom)}}if(f.parent&&f.inDOM===false){g=f.parent;c=typeof g==="string"?new JSLITE.Element(g):g;c.appendChild(d.dom);return h?c.dom:c}else{if(f.parent){$(f.parent).appendChild(d.dom);return h?d.dom:d}else{return h?d.dom:d}}},fly:(function(){var a=JSLITE.globalSymbol,b={};return function(c){if(!b[a]){b[a]=new JSLITE.Element()}b[a].dom=JSLITE.Element.get(c,true);return b[a]}}()),formElements:function(a){var b=JSLITE.Element.get($(a),true);if(b.nodeName.toLocaleLowerCase()!=="form"){throw new Error("This method can only be invoked on a form element.")}return JSLITE.domQuery.search("input[name], select[name], textarea[name]",b)},get:function(c,b,f){if(b&&typeof b==="boolean"){f=b;b=undefined}var e,d,a;if(typeof c!=="string"||/^[a-z]+[^+>=\s]+$/i.test(c)&&!JSLITE.tags.test(c)){if(typeof c==="string"){if(!(e=$(c))){return null}if((d=JSLITE.cache[c])){d.dom=e}else{d=JSLITE.cache[c]=new JSLITE.Element(e)}return f?d.dom:d}else{if(c.id){if((d=JSLITE.cache[c.id])){d.dom=c}else{d=JSLITE.cache[c.id]=new JSLITE.Element(c)}}else{a=JSLITE.dom.id();if((d=JSLITE.cache[a])){d.dom=c}else{d=JSLITE.cache[a]=new JSLITE.Element(c);d.dom.id=a}}return f?d.dom:d}}else{d=JSLITE.cache[c.id]=new JSLITE.Element(JSLITE.Element.gets(c,b||true,true)[0]);return f?d.dom:d}},gets:function(j,f,h){if(f&&typeof f==="boolean"){h=f;f=document}var d,c=[],e,b,g;if(j.indexOf("!")!==-1||typeof document.querySelectorAll!=="function"){d=JSLITE.domQuery.search(j,f)}else{d=(f||document).querySelectorAll(j)}for(e=0,b=d.length;e<b;e++){g=d[e];if(!g.id){g.id=JSLITE.dom.id()}c.push(d[e])}return h?c:new JSLITE.Composite(c)}});JSLITE.Composite=function(a){this.elements=a;this.length=this.elements.length;this.el=new JSLITE.Element()};JSLITE.Composite.prototype={getCount:function(){return this.elements.length},invoke:function(c,a){var b=this.el;this.elements.forEach(function(d){b.dom=d;JSLITE.Element.prototype[c].apply(b,a)});return this}};(function(){JSLITE.Composite.createCall=function(b,c){if(!b[c]){b[c]=function(){return this.invoke(c,arguments)}}};for(var a in JSLITE.Element.prototype){if(typeof JSLITE.Element.prototype[a]==="function"){JSLITE.Composite.createCall(JSLITE.Composite.prototype,a)}}}());JSLITE.Observer=function(){};JSLITE.Observer.prototype={constructor:JSLITE.Observer,subscriberEvents:function(a){if(!this.events){this.events={}}if(typeof a==="string"){for(var c=0,b=arguments;b[c];c++){if(!this.events[b[c]]){this.events[b[c]]=[]}}}else{if(JSLITE.isArray(a)){a.forEach(function(d){this.events[d]=[]}.bind(this))}}},fire:function(e,c){var d=this.events,a=true,b;if(!d){return false}if(d[e]){b={target:this,type:e};if(c&&!JSLITE.isEmpty(c)){JSLITE.apply(b,c)}d[e].forEach(function(f){a=f.call(this,b)}.bind(this))}else{a=false}return a},isObserved:function(a){return !!this.events[a]},purgeSubscribers:function(){this.events={}},subscribe:function(c,a){if(!this.events){return}var b=this.events;if(!b[c]){return}if(b[c]){b[c].push(a)}else{b[c]=a}}.assert(String,Function),unsubscribe:function(c,a){var b=this.events;if(b&&b[c]){b[c].remove(a)}}.assert(String,Function)};JSLITE.ajax=(function(){var oDefaults={type:"get",data:"html",url:"",postvars:"",headers:"",timeout:60000,complete:function(){},error:function(){},success:function(){},abort:function(){},async:true},fnGetXHR=function(){var aFactory=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i,len;for(i=0,len=aFactory.length;i<len;i++){try{aFactory[i]()}catch(e){continue}fnGetXHR=aFactory[i];return aFactory[i]()}throw new Error("XMLHttpRequest object cannot be created.")},fnSendRequest=function(xhr,options){var timeoutLength=options.timeout;setTimeout(function(){if(xhr){xhr.abort();options.abort()}},timeoutLength);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(fnHttpSuccess(xhr)){options.success(fnHttpData(xhr,options))}else{options.error()}options.complete();xhr=null}};if(options.type==="HEAD"){xhr.open(options.type,options.url)}else{xhr.open(options.type,options.url,options.async)}if(options.type==="post"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(options.postvars)}else{xhr.send(null)}},fnHttpSuccess=function(r){try{return !r.status&&location.protocol==="file:"||(r.status>=200&&r.status<300)||r.status===304||JSLITE.isSafari&&typeof r.status==="undefined"}catch(e){}return false},fnHttpData=function(r,options){var ct=r.getResponseHeader("content-type"),data;if(options.type==="HEAD"){return !options.headers?r.getAllResponseHeaders():r.getResponseHeader(options.headers)}if(options.data==="json"){return eval("("+r.responseText+")")}data=ct&&ct.indexOf("xml")>-1;data=options.data==="xml"||data?r.responseXML:r.responseText;return data};return{get:function(sURL){var xhr,options=JSLITE.apply(JSLITE.proto(oDefaults),{url:sURL,async:false});xhr=fnGetXHR();fnSendRequest(xhr,options);return xhr.responseText},load:function(opts){var xhr,options=JSLITE.apply(JSLITE.proto(oDefaults),opts);xhr=fnGetXHR();fnSendRequest(xhr,options);if(!opts.async){if(fnHttpSuccess(xhr)){return fnHttpData(xhr,options)}}}}}());var $=function(b,a){return typeof b==="string"?(a||document).getElementById(b):b};JSLITE.dom=(function(){var a={};return{attachHandler:function(e){var d=[],c,b;if(e.constructor===Array){for(c=0,b=e.length;c<b;c++){d=e[c].split(".");JSLITE[d[0]][d[1]]()}}else{d=e.split(".");JSLITE[d[0]][d[1]]()}},blur:function(e){if(e&&e.tag!=="a"&&e.tag!=="input"){throw new Error("JSLITE.dom.blur(): This method only works on anchors and form inputs.")}var e=e||{},d,b,c,f=e.parent?$(e.parent).getElementsByTagName(e.tag||"a"):document.getElementsByTagName(e.tag||"a");for(d=0,b=f.length;d<b;d++){if(f[d].type!=="text"&&f[d].type!=="hidden"){f[d].onfocus=function(){if(this.blur){this.blur()}}}}if(arguments.length>1){for(c=0;arguments[c]!==null;c++){arguments.callee(arguments[c])}}},cleanWhitespace:function(d){var g=(d&&$(d))||document,c,b,f,e;for(c=0,b=g.childNodes.length;c<b;c++){e=g.childNodes[c];if(e.nodeType===3&&!/\S/.test(e.nodeValue)){g.removeChild(g.childNodes[c]);c--}if(e.nodeType===1){arguments.callee(e)}}if(arguments.length>1){for(f=1;arguments[f]!==null;f++){arguments.callee(arguments[f])}}},event:(function(){var d=function(j,e,o){var f=j._handlers;if(!f){return -1}var m=j.document||j;var n=m.parentWindow;for(var k=f.length;k>=0;k--){var g=f[k];var l=n._allHandlers[g];if(l&&l.eventType===e&&l.handler===o){return k}}return -1};var b=function(){var e=this;for(var g in e._allHandlers){if(e._allHandlers.hasOwnProperty(g)){var f=e._allHandlers[g];f.element.detachEvent("on"+f.eventType,f.wrappedHandler);delete e._allHandlers[g]}}};var c=(function(){var e=0;return function(){return"h"+e++}}());return{add:function(g,f,j){if(document.addEventListener){g.addEventListener(f,j,false)}else{if(document.attachEvent){if(d(g,f,j)!==-1){return}var k=function(n){if(!n){n=window.event}var h={_event:n,type:n.type,target:n.srcElement,currentTarget:g,relatedTarget:n.fromElement?n.fromElement:n.toElement,eventPhase:(n.srcElement===g)?2:3,clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,charCode:n.charCode,keyCode:n.keyCode,stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};if(Function.prototype.call){j.call(g,h)}else{g._currentHandler=j;g._currentHandler(h);g._currentHandler=null}};g.attachEvent("on"+f,k);var i={element:g,eventType:f,handler:j,wrappedHandler:k};var l=g.document||g;var e=l.parentWindow;var m=c();if(!e._allHandlers){e._allHandlers={}}e._allHandlers[m]=i;if(!g._handlers){g._handlers=[]}g._handlers.push(m);if(!e._onunloadHandlerRegistered){e._onunloadHandlerRegistered=true;e.attachEvent("onunload",b)}}}},remove:function(j,g,l){if(document.removeEventListener){j.removeEventListener(g,l,false)}else{if(document.detachEvent){var f=d(j,g,l);if(f===-1){return}var n=j.document||j;var e=n.parentWindow;var m=j._handlers[f];var k=e._allHandlers[m];j.detachEvent("on"+g,k.wrappedHandler);j._handlers.splice(f,1);delete e._allHandlers[m]}}}}}()),find:function(b,d){if(!b||!d){throw new Error("Failure to provide arguments in method JSLITE.dom.find")}var c=JSLITE.Element.get(b,true).parentNode;while(c){if(JSLITE.domQuery.find(c,d)){return c}c=c.parentNode}return false},id:function(){return JSLITE.globalSymbol+JSLITE.counter()},insertAfter:function(d,b){var c=b.parentNode;if(c.lastChild===b){c.appendChild(d)}else{c.insertBefore(d,b.nextSibling)}},insertHtml:function(c,e,d){c=c.toLocaleLowerCase();if(e.insertAdjacentHTML){switch(c){case"beforebegin":e.insertAdjacentHTML("BeforeBegin",d);return e.previousSibling;case"afterbegin":e.insertAdjacentHTML("AfterBegin",d);return e.firstChild;case"beforeend":e.insertAdjacentHTML("BeforeEnd",d);return e.lastChild;case"afterend":e.insertAdjacentHTML("AfterEnd",d);return e.nextSibling}throw'Illegal insertion point -> "'+c+'"'}var b=e.ownerDocument.createRange(),f;switch(c){case"beforebegin":b.setStartBefore(e);f=b.createContextualFragment(d);e.parentNode.insertBefore(f,e);return e.previousSibling;case"afterbegin":if(e.firstChild){b.setStartBefore(e.firstChild);f=b.createContextualFragment(d);e.insertBefore(f,e.firstChild);return e.firstChild}else{e.innerHTML=d;return e.firstChild}case"beforeend":if(e.lastChild){b.setStartAfter(e.lastChild);f=b.createContextualFragment(d);e.appendChild(f);return e.lastChild}else{e.innerHTML=d;return e.lastChild}case"afterend":b.setStartAfter(e);f=b.createContextualFragment(d);e.parentNode.insertBefore(f,e.nextSibling);return e.nextSibling}throw'Illegal insertion point -> "'+c+'"'},isTextBox:function(b){b=JSLITE.Element.get(b,true);return b.nodeName.toLocaleLowerCase()==="input"&&b.type==="text"||b.nodeName.toLocaleLowerCase()==="textarea"},remove:function(d){var c,f,e,b;if(!d){return false}if(typeof d==="string"){f=$(d);if(f){return f.parentNode.removeChild(f)}}else{if(d.constructor===Array){c=[];for(e=0,b=d.length;e<b;e++){f=$(d[e]);if(f){c.push(f.parentNode.removeChild(f))}}return c}}},removeChildren:function(c){if(c.constructor===Array){for(var d=0,b=c.length;d<b;d++){$(c[d]).parentNode.removeChild(elem)}}else{$(c).parentNode.removeChild(elem)}},targetBlank:function(){var e=document.getElementsByTagName("a"),c,b,d;for(c=0,b=e.length;c<b;c++){if(e[c].getAttribute("rel")&&e[c].getAttribute("rel")==="external"||e[c].getAttribute("rel")==="pdf"){e[c].onclick=function(){d=window.open(this.getAttribute("href"));return !d?true:false}}}}}}());JSLITE.domQuery=(function(){var q=[],l=null,d=JSLITE.isIE&&!JSLITE.isIE8,s=d?"className":"class",r=/([>|+]|[a-z0-9_\-.#*]+(?:\([^\)]+\)|\[[^\]]+\])*)/gi,h=/[>+]/,o,k,a=function(u,w){var B=true,t=w,A,y,z,D,v,C;for(A in t){if(t.hasOwnProperty(A)){switch(A){case"has":B=w.has.every(function(x){return u!==document&&u.getAttribute(x)});break;case s:if(typeof w[s]==="string"){B=u===document?false:u.getAttribute(A)===t[A]}else{B=u===document?false:j(u,w[s])}break;case"filter":y=t.filter;z=y.character;for(C in y){if(y.hasOwnProperty(C)){if(C==="character"){continue}D=C;v=y[C];switch(z){case"*":B=u.getAttribute(D)&&u.getAttribute(D).indexOf(v)>-1;break;case"^":B=u.getAttribute(D)&&u.getAttribute(D).indexOf(v)===0;break;case"$":B=u.getAttribute(D)&&u.getAttribute(D).split("").reverse().toString().indexOf(v.split("").reverse().toString())===0;break;case"!":B=!u.getAttribute(D)||u.getAttribute(D)!==v;break}if(!B){break}}}break;default:B=u!==document&&u.getAttribute(A)&&u.getAttribute(A)===t[A]}if(!B){break}}}return B?u:false},c=function(x,u,w){var y,t=[],v=true;if(u){y=$(u).getElementsByTagName(w||"*")}else{y=document.getElementsByTagName("*")||document.all}if(typeof x!=="string"){v=!v}JSLITE.makeArray(y).forEach(function(z){if(v){if((" "+z.className+" ").indexOf(" "+x+" ")>-1){t.push(z)}}else{if(j(z,x)){t.push(z)}}});return t},m=function(z){var x=/((?:[>|+]|[a-z*]+|\[[^\]]+\]|[.#][a-z0-9_\-]+))/gi,t,y={},w,A,u,v;while((t=x.exec(z))!==null){w=t[1];A=w.charAt(0);if(!y.attr){y.attr={}}switch(A){case"#":y.attr.id=w.substring(1);break;case".":if(!y.attr[s]){y.attr[s]=[]}y.attr[s].push(w.substring(1));break;case"[":u=w.replace(/\[([^\]]+)\]/,"$1");if(u.indexOf("=")>-1){u=u.split("=");if(/[*|\^|$|!]/.test(u[0])){u[0]=u[0].replace(/(\w+)([*|\^|$|!]$)/,function(C,B,D){if(!y.attr.filter){y.attr.filter={}}if(!y.attr.filter.character){y.attr.filter.character=D}y.attr.filter[B]=u[1];return C.slice(0,-1)})}else{if(JSLITE.isArray(u)){v=u[0];u=u[1]}else{v=u}if(d){v=v==="class"?s:v;u=u==="class"?s:u}y.attr[v]=u}}else{if(u==="class"){u=s}if(!y.attr.has){y.attr.has=[]}y.attr.has.push(u)}break;default:y.nodeName=w.toLocaleUpperCase()}}return JSLITE.isEmpty(y)?false:y},n=function(u){var t={};if(JSLITE.tags.test(u)){t.nodeName=u.toLocaleUpperCase()}else{t=m(u)}return t},j=function(u,w){var v=true,t=u.getAttribute(s);w.forEach(function(x){if((" "+t+" ").indexOf(" "+x+" ")===-1){v=!v}});return v},i=function(t){t=t.previousSibling;while(t&&t.nodeType!==1){t=t.previousSibling}return t},g=function(u,t){var v=l.parent;if(t===">"){if(u){if(v.nodeName){u=u.parentNode&&u.parentNode.nodeName===v.nodeName?a(u.parentNode,v.attr):false}else{u=a(u.parentNode,v.attr)?u:false}}}else{if(t==="+"){u=i(u);if(u){if(v.nodeName){u=u.nodeName===v.nodeName?u:false}else{u=a(u,v.attr)?u:false}}}}return u},b=function(v,x){var w,u=function(y){l=!l?n(k):l.parent;l.parent=n(y);w=l.parent},t;if(h.exec(o)){t=o;u(x.pop());return g(v,t)}else{u(o);v=v.parentNode;if(w.nodeName){while(v&&v.nodeName!==w.nodeName){v=v.parentNode}if(v){v=a(v,w.attr)}}else{while(v&&v.nodeName){if(!a(v,w.attr)){v=v.parentNode}else{return v}}}return v}},f=function(t,u){k=o;o=u.pop();while(o&&t&&(t=b(t,u))){t=f(t,u)}return t},p=function(t,u){u=q.concat()},e=function(z,v){var t=z.indexOf(",")>-1?z.split(","):[z],u=[],y=[],x=[],w=[];t.forEach(function(A){x.push((function(){var C=[],B,D=[];while(r.exec(A)){C.push(JSLITE.trim(RegExp.$1))}v=v?JSLITE.Element.get(v,true):document;k=C.pop();q=C.concat();if(JSLITE.tags.test(k)){u=JSLITE.makeArray(v.getElementsByTagName(k))}else{l=n(k);if(l.attr[s]){D=c(l.attr[s],v,l.nodeName)}else{if(l.attr.id){D.push(document.getElementById(l.attr.id))}else{D=JSLITE.makeArray(v.getElementsByTagName(l.nodeName))}}D.forEach(function(E){if(l.nodeName&&E.nodeName!==l.nodeName){return}if(a(E,l.attr)){u.push(E)}});D=null;l=null}if(!C.length){return u}if(u.length){u.forEach(function(E){if(!C.length){C=q.concat()}o=C.pop();B=b(E,C);if(!B){p(E,C)}else{if(C.length){if(!f(B,C)){p(E,C)}else{y.push(E)}}else{y.push(E)}}})}return y}()))});x.forEach(function(A){w=w.concat(A)});return w.unique()};return{find:function(t,u){return a(t,n(u).attr)},search:function(u,t){return e(u,t)}}}());JSLITE.apply(JSLITE.log=(function(){var a={},d=[],h=[],f=[],b,e=function(i){d.push(i);JSLITE.log.fire("JSLITE_systemLog",{log:i,archive:d})},g=function(l){var m=0,k=l.length,j=[],n;for(;m<k;m++){n=l[m];switch(true){case typeof n==="string":case typeof n==="number":case typeof n==="boolean":case n instanceof Object:j.push(n);break;case n instanceof Array:j.push(n.toString());break;case typeof n==="function":j.push(n());break}}return j.join(" ")},c=function(k,m){f.length=0;switch(true){case k[0] instanceof Array:h=k[0];break;case typeof k==="string":h=[k];break;default:h=[k[0]]}for(var l=0,j=h.length;l<j;l++){b=h[l];a[b]=m;f.push(b);JSLITE.log[b]=(function(i){return function(n){if(!a[i]){e("The "+i+" log type has been disabled.")}else{this.fire(i,{log:g(JSLITE.makeArray(arguments))})}}}(b))}e("The following log types have been "+(m?"enabled":"disabled")+": "+f.toString()+".")};return{disable:function(){c(arguments,false)},enable:function(i){var j;if(i.constructor===Object){for(j in i){if(i.hasOwnProperty(j)&&j!=="logfile"){this.subscriberEvents(j);this.subscribe(j,i[j]);c(j,true)}}}else{this.subscriberEvents(i);if(!arguments[1]){return}this.subscribe(i,arguments[1]);c(arguments,true)}},flush:function(){d.length=0}}}()),JSLITE.Observer.prototype);JSLITE.log.enable("JSLITE_systemLog");JSLITE.Rules=(function(){var b={email:{re:"^[_a-z0-9-]+(\\.[_a-z0-9-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,3})$",message:"Must be a valid email address."},phone:{re:"^1?\\(?(\\d{3})\\)?\\s?(\\d{3})-?(\\d{4})$",mask:"({1}) {2}-{3}",message:"Can only contain numbers, parenthesis, spaces and a dash."},ssn:{re:"^(\\d{3})(?:[-\\s]?)(\\d{2})(?:[-\\s]?)(\\d{4})$",mask:"{1}-{2}-{3}",message:"Can only contain numbers separated by a dash or a space."},zip:{re:"^([0-9]{5})(?:[-\\s]?)([0-9]{4})?$",mask:"{1}-{2}",message:"Can only contain numbers and a dash."}},a=JSLITE.proto(b);return{getRule:function(c){return a[c]}.assert(String),setRule:function(e,c){var d={};d[e]=c;b=JSLITE.apply(a,d);return b}.assert(String,Object),removeRule:function(c){delete a[c];return a}.assert(String),rules:function(){return a}}}());JSLITE.Template=function(f){var c=arguments,d,e,b;if(JSLITE.isArray(f)){f=f.join("")}else{if(c.length>1){d=[];for(e=0,b=c.length;e<b;e++){if(typeof c[e]==="object"){JSLITE.apply(this,c[e])}else{d[d.length]=c[e]}}f=d.join("")}}this.html=f};JSLITE.Template.prototype={re:/\{(\w+)\}/g,append:function(b,a){JSLITE.dom.insertHtml("beforeEnd",JSLITE.Element.get(b,true),this.apply(a))},apply:function(a){return this.html.replace(this.re,function(d,c){return a[c]})}};JSLITE.util={addCommas:function(c){var b=c+"",a=/(\d+)(\d{3})/;while(a.test(b)){b=b.replace(a,"$1,$2")}return b},camelCase:function(b){var a=/([a-zA-Z0-9])([a-zA-Z0-9]*)[_|\-|\.|\s]([a-zA-Z0-9])/g;return b.replace(a,function(f,e,h,g){return e.toLocaleLowerCase()+h+g.toLocaleUpperCase()})}.assert(String),capFirstLetter:function(b){var a=/[\s|_|\-|\.](\w)/g;b=b.replace(a,function(d,c){return" "+c.toLocaleUpperCase()});return b.charAt(0).toLocaleUpperCase()+b.slice(1)}.assert(String),entify:function(){var a={"&lt;":"<","&gt;":">","&quot;":'"',"&#034;":'"',"&amp;":"&"};return this.replace(/(&.+?;)/g,function(d,c){return typeof a[c]==="string"&&a[c]?a[c]:d})}.assert(String),getOffsetX:function(a){return a.offsetParent?a.offsetLeft+arguments.callee(a.offsetParent):a.offsetLeft},getOffsetY:function(a){return a.offsetParent?a.offsetTop+arguments.callee(a.offsetParent):a.offsetTop},getStyle:function(c,b){if(c.style[b]){return c.style[b]}else{if(document.defaultView&&document.defaultView.getComputedStyle){b=b.replace(/(.*)([A-Z].*)/,function(e,d,f){return d+"-"+f.toLocaleLowerCase()});var a=document.defaultView.getComputedStyle(c,"");return a&&a.getPropertyValue(b)}else{if(c.currentStyle){return c.currentStyle[b]}else{return null}}}},getX:function(a){return a.pageX||a.clientX+document.body.scrollLeft},getY:function(a){return a.pageY||a.clientY+document.body.scrollTop},howMany:function(c,a){var b=0,d=c.indexOf(a);while(d>-1){d=c.indexOf(a,d+1);b++}return b},HTMLify:function(b){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};return b.replace(/[<">&]/g,function(c){return a[c]})}.assert(String),range:function(e){var d=/(\-?\w+)(\.{2,3})(\-?\w+)/,g=d.exec(e),b=[],h=g[1]==="0"||!!Number(g[1]),f,a,c;if(d.test(e)){e=g[2];f=h?Number(g[1]):g[1].charCodeAt();a=h?Number(g[3]):g[3].charCodeAt();if(f>a){throw new Error("The end range cannot be smaller than the start range.")}if(h&&(a-f)>1000){throw new Error("The range is too large, please narrow it.")}for(c=0;f<=a;c++,f++){b[c]=h?f:String.fromCharCode(f)}if(e==="..."){b.splice(-1)}return b}},stripTags:function(a){return a.replace(/<(?:.|\n)+?>/g,"")}.assert(String)};JSLITE.ux={};JSLITE.ux.fade=function(f,i,h,a){if(f.fade){clearTimeout(f.fade)}f.style.backgroundColor="rgb("+i+", "+h+", "+a+")";if(i==238&&h==238&&a==221){return}var e=i+Math.ceil((238-i)/10),c=h+Math.ceil((238-h)/10),b=a+Math.ceil((221-a)/10),g=function(){JSLITE.ux.fade(f,e,c,b)};f.fade=setTimeout(g,50)},JSLITE.ux.Scrubber=function(b,a){this.elements=[];this.failed={};this.passed={};JSLITE.dom.formElements(b).forEach(function(g,e){var f=/required-?(\S*)/,c=[];if(JSLITE.dom.isTextBox(g)){if((c=g.className.match(f))){this.elements.push({elem:g,rule:c[1]});g.sortOrder=JSLITE.counter()}}}.bind(this));this.options=JSLITE.apply({backgroundClass:JSLITE.globalSymbol+"_backgroundError",classMap:"previous",errorBox:JSLITE.Element.create({tag:"div",attr:{className:JSLITE.globalSymbol+"_errorBox"},children:[JSLITE.Element.create({tag:"p",attr:{innerHTML:"The following form elements failed validation:"}}),JSLITE.Element.create({tag:"ol",attr:{className:JSLITE.globalSymbol+"_errorList"}})]}),rule:{message:"Required fields cannot be blank."},template:new JSLITE.Template("<label>{name}</label><span>{rule}</span>"),textClass:JSLITE.globalSymbol+"_textError"},a||{})};JSLITE.ux.Scrubber.prototype={classMap:function(b){var c=JSLITE.Element.get(this.currentElement),e=this.options,a;e.classMap=typeof e.classMap==="string"?[e.classMap]:e.classMap;e.classMap.forEach(function(f){a=c[f]()});JSLITE.Element.fly(a)[b](e.textClass)},counter:0,fail:function(){var a=JSLITE.Element.get(this.currentElement),b=this.options;if(!a.hasClass(b.backgroundClass)){a.addClass(b.backgroundClass);this.classMap("addClass")}this.failed[this.currentElement.name]={elem:this.currentElement,rule:this.currentRule||this.options.rule};if(this.passed[this.currentElement.name]){delete this.passed[this.currentElement.name]}this.counter++},getErrors:function(){return this.counter},pass:function(){var a=JSLITE.Element.get(this.currentElement),b=this.options;if(a.hasClass(b.backgroundClass)){a.removeClass(b.backgroundClass);this.classMap("removeClass")}this.passed[this.currentElement.name]={elem:this.currentElement,rule:this.currentRule||this.options.rule};if(this.failed[this.currentElement.name]){delete this.failed[this.currentElement.name]}},setErrorBox:function(){var c=this.options.errorBox,e=c.dom.lastChild,b=this.failed,a=[];if(c&&$(c.dom.id)){c.dom.lastChild.innerHTML="";c.dom.parentNode.removeChild(c.dom)}a=JSLITE.toArray(b);a.sort(function(g,f){return g.elem.sortOrder>f.elem.sortOrder});a.forEach(function(g){var f=JSLITE.Element.create({tag:"li",parent:e});f.dom.innerHTML=this.options.template.apply({name:JSLITE.util.capFirstLetter(g.elem.name),rule:g.rule.message})}.bind(this));return c},validate:function(){this.counter=0;this.elements.forEach(function(g,c){var b=g.rule,g=g.elem,f=[],a,e;this.currentElement=g;JSLITE.Element.fly(g).trim();a=this.currentRule=JSLITE.Rules.getRule(b);if(a){if((f=g.value.match(new RegExp(a.re)))){this.pass();if(a.mask){e=a.mask;e=e.replace(/\{(\d+)\}/g,function(i,h){return f[h]});g.value=e.replace(/undefined/g,"")}}else{this.fail()}}else{if(/^\s*$/.test(g.value)||g.value===""){this.fail()}else{this.pass()}}}.bind(this))}};JSLITE.ux.Tabs=function(b){var c=function(g){var f=g.target;if(f.nodeName.toLocaleLowerCase()==="a"&&f.getAttribute("rel")){if(f.parentNode.id==="selected"){return false}JSLITE.Element.gets("."+JSLITE.tabClasses.tabs,true).forEach(function(e){JSLITE.makeArray(e.getElementsByTagName("li")).forEach(function(h){h.id=""})});f.parentNode.id="selected";JSLITE.Element.gets("div."+JSLITE.tabClasses.tab,true).forEach(function(e){var h=JSLITE.Element.fly(e);if(h.dom.id===f.rel){h.removeClass("hide")}else{if(!h.hasClass("hide")){h.addClass("hide")}}})}g.preventDefault()},a=JSLITE.Element.gets("."+JSLITE.tabClasses.tabs);a.on("click",c);if(!JSLITE.isIE){JSLITE.makeArray(a.el.dom.getElementsByTagName("a")).forEach(function(e){e.onfocus=function(){if(this.blur){this.blur()}}})}};JSLITE.ux.Tooltip=(function(){var c=function(e){JSLITE.ux.AnimationManager.add([{anchor:true,elem:e.elem,direction:"right",fadeIn:true,go:e.width,speed:"slowRide"},{anchor:true,elem:e.elem,direction:"bottom",fadeIn:true,go:e.height,speed:"slowRide",complete:function(){e.tooltipWrapper.setStyle({visibility:"visible",width:e.tooltipWrapperWidth})}}]).run()},b=function(f,e){JSLITE.Element.fly(f).on("click",function(k){var m=$(this.tooltip.wrapper),h=m.style,i=JSLITE.Element.get(".JSLITE_TooltipWrapper",m),j,l,g;h.top=JSLITE.util.getY(k)+"px";h.left=JSLITE.util.getX(k)+"px";if(e){h.opacity=0}h.display="block";if(e){j=parseInt(JSLITE.util.getStyle(m,"width"),10);l=parseInt(JSLITE.util.getStyle(m,"height"),10);i.setStyle("visibility","hidden");g=JSLITE.util.getStyle(i.dom,"width");h.height=0;h.width=0}h.zIndex=JSLITE.counter();$(this.tooltip.identifier).className="";if(e){c({elem:$(this.tooltip.wrapper),height:l,width:j,tooltipWrapper:i,tooltipWrapperWidth:g})}k.preventDefault()})},a=function(e){e.wrapper=JSLITE.tooltipClass+"-"+e.identifier;oTipDiv=JSLITE.Element.create({tag:"div",attr:{id:e.wrapper,className:JSLITE.tooltipClass},children:[JSLITE.Element.create({tag:"p",attr:{id:e.wrapper+"-Header",className:JSLITE.tooltipClass+"Header",innerHTML:JSLITE.globalSymbol},children:[JSLITE.Element.create({tag:"a",attr:{href:"#",id:e.wrapper+"-Close",className:JSLITE.tooltipClass+"Close",innerHTML:"Close",onclick:function(){$(e.wrapper).style.display="none";return false}}})]}),JSLITE.Element.create({tag:"div",attr:{id:e.wrapper+"-Wrapper",className:JSLITE.tooltipClass+"Wrapper"}})],parent:document.body});JSLITE.Element.get("#"+e.wrapper+"-Wrapper").append($(e.identifier))};return{init:function(e,h){var g,e,f=/JSLITE_Tooltip_([a-z]+)\[([-_a-z0-9]+)\]/i;if(this.dom){g=JSLITE.Element.create({tag:"div",attr:{innerHTML:e},parent:document.body});this.dom.tooltip={identifier:g.dom.id};a(this.dom.tooltip);b(this.dom,h)}else{e=e||document.getElementsByTagName("a");arr=typeof e==="string"?[JSLITE.Element.get(e,true)]:!JSLITE.isArray(e)?JSLITE.makeArray(e):e;arr.forEach(function(i){i=JSLITE.Element.get(i,true);if(i.className){i.className.replace(f,function(k,j,l){i.tooltip={type:j,identifier:l}})}if(!i.tooltip){return}a(i.tooltip);b(i,h)})}}}}());JSLITE.ux.Overlay=function(a){this.element=JSLITE.Element.get(a);this.overlay=JSLITE.Element.create({tag:"div",style:{background:"url(http://www.benjamintoll.com/jslite/images/loading.gif) 50% 50% no-repeat",backgroundColor:"#CCC",display:"none",height:a===document.body?Math.max(document.documentElement.offsetHeight,document.body.scrollHeight,document.documentElement.clientHeight)+"px":this.element.getStyle("height"),opacity:0.7,filter:"alpha(opacity=70)",position:"absolute",top:0,left:0,width:a===document.body?Math.max(document.body.scrollWidth,document.documentElement.clientWidth)+"px":this.element.getStyle("width")},parent:this.element.dom})};JSLITE.extend(JSLITE.ux.Overlay,JSLITE.Observer,{hide:function(){this.overlay.dom.style.display="none"},show:function(){this.overlay.dom.style.display="block"}});JSLITE.ux.GridView=function(){};JSLITE.extend(JSLITE.ux.GridView,JSLITE.Observer,{makeCompound:function(){var k=this.cm,j=this.templates,e=this.store.storage.items,l=[],c,h,g,f,b;for(c=0,h=e.length;c<h;c++){d=e[c].data;g=[];for(f=0,b=this.cm.getColumnCount();f<b;f++){var a=this.store.reader.recordType.prototype.fields;g.push(j.gridCell.apply({className:k.getColumnClassName(f)||JSLITE.globalSymbol+"_Grid_cell_"+f,value:k.getColumnRenderer(f)||d[k.getDataIndex(f)],style:k.getColumnStyle(f)||""}))}l.push(j.gridRow.apply({cells:g.join(""),id:JSLITE.globalSymbol+"_Grid_row_"+c,className:(function(i){var m="";if(i.stripe){m=c%2!==0?JSLITE.globalSymbol+"_Grid_row_alt":""}return m}(this)),style:"width: "+this.cm.getTotalWidth()+"px;"}))}return l.join("")},makeSimple:function(f){var b=this.cm,c=[],e,a;for(e=0,a=this.cm.getColumnCount();e<a;e++){c.push(this.templates[f].apply({id:b.getColumnId(e)||"",className:b.getColumnClassName(e)||JSLITE.globalSymbol+"_Header_cell_"+e,value:b.getColumnRenderer(e)||b.getColumnHeader(e)||"",style:b.getColumnStyle(e)||""}))}return c.join("")},makeTemplates:function(){this.templates={container:new JSLITE.Template("<div class='"+JSLITE.globalSymbol+"_Grid_container' style='{containerStyle}'><div id='"+this.id+"'><div class='"+JSLITE.globalSymbol+"_Grid_header'>{header}</div><div class='"+JSLITE.globalSymbol+"_Grid_scroller' style='{scrollerStyle}'><div class='"+JSLITE.globalSymbol+"_Grid_body'>{body}</div><a href=''></a></div></div></div>"),header:new JSLITE.Template("<table style='{style}'><thead><tr>{cells}</tr></thead></table>"),headerCell:new JSLITE.Template("<th class='"+JSLITE.globalSymbol+"_Header_cell {className}' id='{id}' style='{style}'><div style='{istyle}'>{value}</div></th>"),body:new JSLITE.Template("{rows}"),gridRow:new JSLITE.Template("<div id='{id}' class='"+JSLITE.globalSymbol+"_Grid_row {className}' style='{style}'><table><tbody><tr>{cells}</tr></tbody></table></div>"),gridCell:new JSLITE.Template("<td id='{id}' class='"+JSLITE.globalSymbol+"_Grid_cell {className}' style='{style}'><div style='{istyle}'>{value}</div></td>")}}});JSLITE.ux.Grid=function(a){this.id=a.id||JSLITE.dom.id();this.store=a.store;this.cm=a.cm;this.height=a.height;this.width=a.width;this.stripe=a.stripe||false;this.checkbox=a.checkbox;this.pager=a.pager;this.subscriberEvents(["afterrender","beforerender","headerclick","remove","rowclick"]);this.init()};JSLITE.extend(JSLITE.ux.Grid,JSLITE.ux.GridView,{add:function(a){this.store.add(a);return this.store},addRow:function(a){this.store.addRow(a)},indexRows:function(){var c=JSLITE.Element.gets("."+JSLITE.globalSymbol+"_Grid_row",$(this.id),true);for(var b=0,a=c.length;b<a;b++){c[b].rowIndex=b}},init:function(){var a=function(){this.makeTemplates();this.html=this.templates.container.apply({containerStyle:"width: "+this.width+"px;",scrollerStyle:"height: "+this.height+"px; width: "+this.width+"px",header:this.templates.header.apply({cells:this.makeHeader(),style:"width: "+this.cm.getTotalWidth()+"px;"}),body:this.templates.body.apply({rows:this.makeBody()})})};if(!this.store.gridData){this.store.subscribe("gridload",function(){if(!arguments.callee.initialized){a.call(this);arguments.callee.initialized=true}else{JSLITE.Element.get("#"+this.id+" ."+JSLITE.globalSymbol+"_Grid_body",true).innerHTML=this.makeBody();this.indexRows()}}.bind(this))}else{a.call(this)}if(this.store.autoload){this.store.fetch()}},bindEvents:function(b){var a=function(g){var c=JSLITE.Element.get(g.event.target),f=c.closest(g.parentCell),e=/.*_(\d+)$/;if(f){g.scope.fire(g.type,{target:c,selection:{value:c.value(),cellIndex:parseInt(f.dom.className.replace(e,"$1"),10),rowIndex:g.type==="headerclick"?0:parseInt(c.closest("div").dom.id.replace(e,"$1"),10)},originalEvent:g.event})}};JSLITE.Element.get("#"+this.id+" ."+JSLITE.globalSymbol+"_Grid_body").on("click",function(c){a({scope:this,event:c,parentCell:"td",type:"rowclick"})}.bind(this));JSLITE.Element.get("#"+this.id+" ."+JSLITE.globalSymbol+"_Grid_header").on("click",function(c){a({scope:this,event:c,parentCell:"th",type:"headerclick"});c.stopPropagation()}.bind(this))},makeBody:function(){return this.makeCompound()},makeHeader:function(){return this.makeSimple("headerCell")},remove:function(){if(this.fire("remove")!==false){JSLITE.Element.get(this.id).parent().remove()}},render:function(e){var c=this;var b=function(){JSLITE.dom.insertHtml("beforeEnd",e,this.html);this.indexRows();this.bindEvents();if(this.pager){this.pager.init(this)}if(this.checkbox){this.checkbox.init(this)}this.fire("afterrender")};if(this.fire("beforerender")!==false){if(this.store.localStore){if(!this.store.data){throw new Error("No data has been fetched!")}if(!this.html){throw new Error("You've invoked render() before you've fetched your data!")}b.call(this)}else{var a=function(){b.call(c);c.store.overlay=c.overlay=new JSLITE.ux.Overlay(c.id);c.store.unsubscribe("gridload",a)};this.store.subscribe("gridload",a)}}}});JSLITE.ux.Store=function(){this.storage=new JSLITE.ux.Storage(function(a){return a.id});this.fields=this.reader.recordType.prototype.fields};JSLITE.extend(JSLITE.ux.Store,JSLITE.Observer,{autoload:true,add:function(a){this.storage.addAll(a)},clear:function(){this.storage.clear()},load:function(){if(this.fire("afterload")!==false){switch(this.type){case"json":this.clear();this.add(this.reader.parseJson(this.data));break;case"xml":this.add(this.reader.parseXML(this.data));break}this.fire("gridload")}if(this.overlay){this.overlay.hide()}},loadData:function(a){this.data=a;this.load()}});JSLITE.ux.LocalStore=function(a){if(!a.type||[" json "," xml "," array "].join("").indexOf(" "+a.type+" ")===-1){throw new Error("You must specify a valid data type to fetch!")}this.type=a.type;this.autoload=a.autoload===false?false:true;this.data=a.data||null;this.reader=a.reader;this.data=a.data;this.data.total=a.data.rows.length;this.params={limit:a.limit||25};this.localStore=true;this.subscriberEvents(["afterload","beforeload","gridload","remove"]);JSLITE.ux.LocalStore.superclass.constructor.call(this)};JSLITE.extend(JSLITE.ux.LocalStore,JSLITE.ux.Store,{fetch:function(a){this.fire("beforeload");this.load()}});JSLITE.ux.RemoteStore=function(a){if(!a.type||[" json "," xml "," array "].join("").indexOf(" "+a.type+" ")===-1){throw new Error("You must specify a valid data type to fetch!")}this.type=a.type;this.autoload=a.autoload===false?false:true;this.url=a.url;this.params=a.params;this.reader=a.reader;this.subscriberEvents(["afterload","beforeload","gridload","remove"]);JSLITE.ux.RemoteStore.superclass.constructor.call(this)};JSLITE.extend(JSLITE.ux.RemoteStore,JSLITE.ux.Store,{fetch:function(c){var a="",b;if(this.params){b=c&&typeof c==="string"?this.params.limit*(Number(c)-1):this.params.start;a=(this.url.indexOf("?")>-1?"&":"?")+"start="+b+"&limit="+this.params.limit}if(this.fire("beforeload")!==false){JSLITE.ajax.load({url:this.url+a,data:this.type,success:function(e){this.data=e;this.load()}.bind(this),error:function(e){}})}}});JSLITE.ux.ColumnModel=function(b){this.columns=b;this.defaultWidth=100;this.subscriberEvents("clickcolumnheader")};JSLITE.extend(JSLITE.ux.ColumnModel,JSLITE.Observer,{getColumns:function(){return this.columns},getColumnClassName:function(a){return this.columns[a].className},getColumnCount:function(){return this.columns.length},getColumnHeader:function(a){return this.columns[a].header},getColumnId:function(a){return this.columns[a].id},getColumnRenderer:function(a){return this.columns[a].renderer},getColumnStyle:function(a){var b="width: "+this.getColumnWidth(a)+"px";return b},getColumnWidth:function(a){return this.columns[a].width||this.defaultWidth},getDataIndex:function(a){return this.columns[a].dataIndex||""},getTotalWidth:function(){if(!this.totalWidth){this.totalWidth=0;for(var b=0,a=this.getColumnCount();b<a;b++){this.totalWidth+=this.getColumnWidth(b)}}return this.totalWidth}});JSLITE.ux.Record=function(b,a){this.data=b;this.id=JSLITE.ux.Record.counter()};JSLITE.ux.Record.counter=(function(){var a=1000;return function(){return a++}}());JSLITE.ux.Record.create=function(f){var c=JSLITE.extend(JSLITE.ux.Record,{}),e=c.prototype;e.fields=new JSLITE.ux.Storage(function(g){return g.name});for(var b=0,a=f.fields.length;b<a;b++){e.fields.add(f.fields[b])}return c};JSLITE.ux.Reader=function(a){this.root=a.root;this.recordType=JSLITE.ux.Record.create(a)};JSLITE.apply(JSLITE.ux.Reader.prototype,{parseJson:function(l){var g=[],c=l[this.root],m=this.recordType.prototype.fields,k=[],a,b,p;for(var f=0,h=c.length;f<h;f++){a=c[f];b={};for(var e=0,q=m.items.length;e<q;e++){p=m.items[e].name;b[p]=a[p]}k.push(new this.recordType(b))}return k},parseXML:function(a){var g=[],c=a.getElementsByTagName(this.root),l=this.recordType.prototype.fields,b,k=[];for(var f=0,h=c.length;f<h;f++){b={};for(var e=0,m=l.items.length;e<m;e++){b[l.items[e].name]=c[f].getElementsByTagName(l.items[e].name)[0].firstChild.nodeValue}k.push(new this.recordType(b))}return k}});JSLITE.ux.Pager=function(a){this.start=a.start;this.store=a.store;this.location=a.location||"bottom";this.template=a.template||new JSLITE.Template("{pageStart} - {pageEnd} of {total}");this.subscriberEvents(["pagechange","pagerclick"])};JSLITE.extend(JSLITE.ux.Pager,JSLITE.Observer,{init:function(j){var g=this,h="beforeEnd",b,a=[],c=this.totalPages=Math.ceil(this.store.data.total/this.store.params.limit),f,e;this.grid=j;this.subscribe("pagechange",function(p){var k=p.currentPage,i="#"+j.id,l=this.store.params.limit,m=((k-1)*l+1),o=this.store.data.total;this.store.subscribe("afterload",function(q){JSLITE.Element.get(i+" ."+JSLITE.globalSymbol+"_Pager_records",true).innerHTML=this.totalPages==k?this.template.apply({pageStart:m,pageEnd:o,total:o}):this.template.apply({pageStart:m,pageEnd:l*k,total:o})}.bind(this))}.bind(this));if(this.location!=="bottom"){h="beforeBegin";b="#"+j.id+" ."+JSLITE.globalSymbol+"_Grid_header"}else{b="#"+j.id}e=c===1?new JSLITE.Template("{pageStart} - {pageEnd}").apply({pageStart:1,pageEnd:this.store.data.total}):this.template.apply({pageStart:1,pageEnd:this.store.params.limit,total:this.store.data.total});JSLITE.dom.insertHtml(h,JSLITE.Element.get(b,true),"<div class='"+JSLITE.globalSymbol+"_Pager_row clearfix'><table class='first_Pager_table'><tbody><tr><td>Page&nbsp;<select class='"+JSLITE.globalSymbol+"_Pager_select'></select>&nbsp;of "+c+"</td></tr></tbody></table><table><tbody><tr><td><span class='"+JSLITE.globalSymbol+"_Pager_records'>"+e+"</span></td></tr></tbody></table></div>");for(f=1;f<=c;f++){a.push(JSLITE.Element.create({tag:"option",attr:{innerHTML:f,value:f}}))}JSLITE.Element.get("#"+j.id+" ."+JSLITE.globalSymbol+"_Pager_select").append(a).on("change",function(i){var k=this.value;g.store.overlay.show();g.store.fetch(k);g.fire("pagechange",{currentPage:k})});JSLITE.Element.get("#"+j.id+" ."+JSLITE.globalSymbol+"_Pager_row").on("click",function(k){var i=JSLITE.Element.get(k.target);this.fire("pagerclick",{target:i,originalEvent:k});k.stopPropagation()}.bind(this))}});JSLITE.ux.Checkbox=function(a){a=a||{};this.selections=new JSLITE.ux.Storage(function(b){return b.id});this.subscriberEvents(["additem","removeitem","selectall","selectone"])};JSLITE.extend(JSLITE.ux.Checkbox,JSLITE.Observer,{getSelections:function(){return this},init:function(b){var a=this;this.grid=b;JSLITE.Element.get("input",$(this.grid.id)).on("click",function(f){var c;if(a.fire("selectall")!==false){JSLITE.Element.gets("."+a.className+" input",$(a.grid.id),true).forEach(function(e){e.checked=this.checked},this);a.selections.clear();if(this.checked){c=JSLITE.Element.gets("."+JSLITE.globalSymbol+"_Grid_row",$(a.grid.id),true).length;while(c--){oSelection=a.grid.store.storage.getItem(c);a.selections.add(oSelection)}}}});this.grid.store.subscribe("afterload",function(c){JSLITE.Element.get("input",$(this.grid.id),true).checked=false}.bind(this));JSLITE.Element.fly(this.grid.id).on("click",function(h){var g=h.target,c,f;if(g.nodeName==="INPUT"&&g.type==="checkbox"){c=JSLITE.dom.find(g,"."+JSLITE.globalSymbol+"_Grid_row").rowIndex;f=a.grid.store.storage.getItem(c);if(g.checked){if(a.fire("additem",{item:f})!==false){a.selections.add(f)}}else{if(a.fire("removeitem",{item:f})!==false){a.selections.remove(f)}}}})},className:JSLITE.globalSymbol+"_checkbox",renderer:"<input style='margin: 0;' type='checkbox' />",width:20});JSLITE.ux.Storage=function(a){this.items=[];this.map={};this.keys=[];this.getKey=a||function(b){return b.id}};JSLITE.apply(JSLITE.ux.Storage.prototype,{add:function(b){var a=this.getKey(b);if(a){this.items.push(b);this.map[a]=b;this.keys.push(a)}},addAll:function(b){if(JSLITE.isArray(b)){for(var c=0,a=b.length;c<a;c++){this.add(b[c])}}else{if(typeof b==="object"){this.add(b)}}},clear:function(){this.items.length=0;this.keys.length=0;this.map={}},getAll:function(){return this.items},getItem:function(a){if(a>-1&&a<this.items.length){return this.items[a]}return null},remove:function(b){var a=this.getKey(b);this.keys.remove(a);delete this.map[a];return this.items.remove(b)},size:function(){return this.items.length}});JSLITE.apply(JSLITE.EventManager=(function(){var a=function(b,e,c){JSLITE.Element.get(b).on(e,c)};return{register:a}}()),JSLITE.Observer.prototype);JSLITE.EventManager.register(document,"mouseup",function(a){JSLITE.ux.DropZoneManager.onMouseUp(a)});JSLITE.ux.DropZoneManager=(function(){var e=0,h,b={},k,l,c;function f(m,r){var i=[],q,p;if(!(m instanceof Array)){if(m instanceof JSLITE.Composite){i=m.elements}else{i=[JSLITE.Element.get(m,true)]}i.forEach(function(s){var o=b[s.id]=s;JSLITE.apply(o,JSLITE.Observer.prototype);o.subscriberEvents(["beforenodedrop","afternodedrop"]);if(r.subscribe){p=r.subscribe;for(q in p){if(p.hasOwnProperty(q)){o.subscriberEvents(q);o.subscribe(q,p[q])}}}s.sort=r.sort||false;s.snapToZone=r.snapToZone||false})}else{b.push(JSLITE.Element.get(m))}m.on("mousedown",function(s){var o=s.target;o=o.className.indexOf("JSLITE_draggable")!==-1?o:JSLITE.dom.find(o,".JSLITE_draggable");if(o){o.owner=this.id;k=o.cloneNode(true);l=o;JSLITE.Element.fly(k).addClass("JSLITE_dragging");document.body.appendChild(k);document.onmousemove=function(t){t=t||window.event;JSLITE.Element.fly(k).setStyle({display:"block",top:JSLITE.util.getY(t)+20+"px",left:JSLITE.util.getX(t)+10+"px"})}}document.body.focus();document.onselectstart=function(){return false};s.preventDefault()});m.on("mouseover",function(o){if(k){if(l.owner!==this.id){c=this.id;JSLITE.Element.fly(k).addClass("JSLITE_overDropZone")}}});m.on("mouseout",function(o){if(k){c=null;JSLITE.Element.fly(k).removeClass("JSLITE_overDropZone")}})}function a(i){if(!k){return}var m;if(c&&c.indexOf(l.owner)===-1){oZoneTarget=$(c);m=JSLITE.ux.DropZoneManager.getDropZones()[c];if(m){if(m.id!==l.owner){if(m.fire("beforenodedrop")!==false){document.body.removeChild(k);$(c).appendChild(l);l.owner=m.id;if(m.sort){g(c)}if(l.snapped&&!m.snapToZone){JSLITE.Element.fly(l).setStyle(l.originalStyles);l.snapped=false}else{if(!l.snapped&&m.snapToZone){j(l)}}}else{document.body.removeChild(k)}}m.fire("afternodedrop")}}else{document.body.removeChild(k)}k=null;document.onmousemove=null;document.onselectstart=null}function j(o){var i=JSLITE.util.getStyle,m={borderTopColor:i(o,"border-top-color"),borderTopStyle:i(o,"border-top-style"),borderTopWidth:i(o,"border-top-width"),borderRightColor:i(o,"border-right-color"),borderRightStyle:i(o,"border-right-style"),borderRightWidth:i(o,"border-right-width"),borderBottomColor:i(o,"border-bottom-color"),borderBottomStyle:i(o,"border-bottom-style"),borderBottomWidth:i(o,"border-bottom-width"),borderLeftColor:i(o,"border-left-color"),borderLeftStyle:i(o,"border-left-style"),borderLeftWidth:i(o,"border-left-width"),marginTop:i(o,"margin-top"),marginRight:i(o,"margin-right"),marginBottom:i(o,"margin-bottom"),marginLeft:i(o,"margin-left")};o.snapped=true;o.style.border=o.style.margin=0;o.originalStyles=m}function g(p){var i=JSLITE.makeArray($(p).childNodes).filter(function(q){return(typeof q.sortOrder==="number")}),o=document.createDocumentFragment(),m=JSLITE.Element.get(p);i.sort(function(r,q){return r.sortOrder-q.sortOrder});m.remove(true);i.forEach(function(q){o.appendChild(q)});m.append(o)}return{add:function(i,m){m=m||{};return f(i,m)},getDropZones:function(){return b},onMouseUp:function(i){return a.call(this,i)}}}());JSLITE.apply(JSLITE.ux.AnimationManager=(function(){var c=[],a=null,b=/\bthis\.run\b/;arguments.callee.active=false;return{speed:{blast:[12,12,11,10,10,9,8,7,6,5,4,3,2,1],"default":[1,2,3,4,5,6,7,8,9,10,9,8,7,6,5,4,3,2,1],easeIn:[1,2,3,4,5,6,7,8,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],linear:[10,10,10,10,10,10,10,10,10,10],slowRide:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]},add:function(e){if(this.fire("animationadd",{animations:e})!==false){e.forEach(function(f){new JSLITE.ux.Animation(f)})}return this}.assert(Array),animate:function(){var g=0,f=0,e=c.length;for(;f<e;f++){if(c[f].active){c[f].animate();g++}}if(g===0&&a){if(!JSLITE.ux.AnimationManager.oncomplete||!JSLITE.ux.AnimationManager.oncomplete(c)){JSLITE.ux.AnimationManager.fire("timerdestroy");clearInterval(a);a=null;JSLITE.ux.AnimationManager.active=false}}},clear:function(){if(this.fire("queuedestroy")!==false){c.length=0}},createTween:function(e){var v=e.elem,w=e.end,g=e.go,t=e.anchor,f,j,p,s,q=0,m=[],u=this.speed[e.speed]||this.speed["default"],r=u.length,l,h=function(i){f=parseInt(JSLITE.util.getStyle(v,i),10);f=!f?0:f;j=parseInt(JSLITE.util.getStyle(v,"opacity"),10)};switch(e.direction){case"right":h("left");p=(typeof w!=="number")?g:w-f;l=true;break;case"left":h("left");p=(typeof w!=="number")?g:f-w;l=false;break;case"bottom":h("top");p=(typeof w!=="number")?g:w-f;l=true;break;case"top":h("top");p=(typeof w!=="number")?g:f-w;l=false;break}s=t?0:f;for(var k=0;k<r;k++){if(e.fadeIn){j+=u[k]/100}else{if(e.fadeOut){q+=u[k]/100;j=q>1?0:1-q}}if(l){s=t?(p*u[k]/100):s+(p*u[k]/100)}else{s=t?(p*u[k]/100):s-(p*u[k]/100)}m[k]={data:s,opacity:j,event:null}}e.tween=m;e.frame=0;e.totalFrames=m.length},oncomplete:function(){var f=false,g,e,j,h=[];c.forEach(function(l,m){var k=false;if(l.motions){if(!l.motions.length&&!l.oncomplete){k=true}else{if(!l.motions.length){if(l.oncomplete){l.oncomplete();if(l.oncomplete&&!b.test(l.oncomplete)){k=true}}}else{if(l.oncomplete){l.oncomplete();l.oncomplete=null}}}}else{if(l.oncomplete){if(l.oncomplete&&!b.test(l.oncomplete)){l.oncomplete();k=true}else{if(!l.gotHere&&b.test(l.oncomplete)){l.oncomplete();l.gotHere=true}else{k=true}}}else{if(l.frame>l.totalFrames){k=true}}}if(k){this.fire("animationremove",{removedAnimation:l});h.push(m)}},this);for(n=0,e=h.length;n<e;n++){c.splice(h.pop(),1)}for(n=0,e=c.length;n<e;n++){j=c[n];if(j.motions){if(j.motions.length){j.create(j.motions.shift());j.active=true}}f=true}return f},register:function(e){if(this.fire("animationregister",{animation:e})!==false){e.active=true;c.push(e)}},run:function(){if(a||JSLITE.ux.AnimationManager.active){return false}if(c.length){JSLITE.ux.AnimationManager.active=true;a=setInterval(JSLITE.ux.AnimationManager.animate,this.interval||20);JSLITE.ux.AnimationManager.fire("timercreate")}else{throw new Error("There is nothing to run!")}}}}()),JSLITE.Observer.prototype);JSLITE.ux.AnimationManager.subscriberEvents(["animationadd","animationregister","animationremove","animationrun","queuedestroy","timercreate","timerdestroy"]);JSLITE.ux.Animation=function(a){if(!a.elem){throw new Error("No element provided for animation!")}this.active=false;this.motions=a.motions||null;if(this.motions){a=JSLITE.apply(a,this.motions.shift())}this.create(a);JSLITE.ux.AnimationManager.register(this)};JSLITE.apply(JSLITE.ux.Animation.prototype,{animate:function(f){var a,b,e,c;if(JSLITE.ux.AnimationManager.fire("animationrun")!==false){if(this.frame<this.totalFrames){a=["left","right"].join("").indexOf(this.direction)!==-1?"left":"top";if(this.anchor){switch(this.direction){case"right":b=Number(JSLITE.util.getStyle(this.elem,"width").replace(/p[x|t]$/,""));this.elem.style.left=c;this.elem.style.width=b+this.tween[this.frame].data+"px";break;case"left":b=Number(JSLITE.util.getStyle(this.elem,"width").replace(/p[x|t]$/,""));c=Number(JSLITE.util.getStyle(this.elem,"left").replace(/p[x|t]$/,""));this.elem.style.width=b+this.tween[this.frame].data+"px";this.elem.style.left=c-this.tween[this.frame].data+"px";break;case"bottom":e=Number(JSLITE.util.getStyle(this.elem,"height").replace(/p[x|t]$/,""));var g=this.tween[this.frame].data;if(g<1){g=1}this.elem.style.height=e+g+"px";break;case"top":e=Number(JSLITE.util.getStyle(this.elem,"height").replace(/p[x|t]$/,""));this.elem.style.height=e-this.tween[this.frame].data+"px";break}}else{this.elem[a]=this.tween[this.frame].data+"px";this.elem.style[a]=this.tween[this.frame].data+"px"}this.elem.style.opacity=this.tween[this.frame].opacity}if(this.frame++>=this.totalFrames){this.active=false;if(this.fadeOut&&this.elem.style.opacity!==0){this.elem.style.opacity=0}}}},create:function(a){this.elem=a.elem||this.elem;this.direction=a.direction||"right";this.anchor=typeof a.anchor==="boolean"?a.anchor:this.anchor;this.go=typeof a.go==="number"?a.go:null;this.end=typeof a.end==="number"?a.end:null;this.interval=a.interval||null;this.speed=a.speed||this.speed;this.motions=a.motions||this.motions;if(typeof a.fadeOut==="boolean"){this.fadeOut=a.fadeOut;this.fadeIn=null}else{if(typeof a.fadeIn==="boolean"){this.fadeIn=a.fadeIn;this.fadeOut=null}}this.oncomplete=a.complete||this.oncomplete;JSLITE.ux.AnimationManager.createTween(this)},reset:function(){JSLITE.ux.AnimationManager.reset()},run:function(a){if(a){this.active=true;this.create(a);this.oncomplete=a.complete}if(!JSLITE.ux.AnimationManager.active){JSLITE.ux.AnimationManager.run.call(this)}}});